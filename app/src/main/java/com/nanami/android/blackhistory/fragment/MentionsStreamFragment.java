package com.nanami.android.blackhistory.fragment;import android.support.annotation.NonNull;import android.support.annotation.Nullable;import android.widget.ListView;import com.nanami.android.blackhistory.adapter.TweetAdapter;import com.nanami.android.blackhistory.event.TwitterFavoriteEvent;import com.nanami.android.blackhistory.event.TwitterStreamEvent;import com.nanami.android.blackhistory.fragment.list.TimelineListType;import com.nanami.android.blackhistory.fragment.listener.ListStreamListener;import com.squareup.otto.Subscribe;import java.util.List;import twitter4j.Status;import twitter4j.Twitter;import twitter4j.TwitterException;/** * Created by TEJNEK on 2016/01/19. */public class MentionsStreamFragment extends CommonStreamFragment {    public static MentionsStreamFragment newInstance(Long userId){        MentionsStreamFragment fragment = new MentionsStreamFragment();        fragment.setArguments(userId, TimelineListType.Mentions, new StreamListener());        return fragment;    }    static class StreamListener implements ListStreamListener {        @Nullable        @Override        public List<Status> call(Twitter twitter) throws TwitterException {            return twitter.getMentionsTimeline();        }        @Override        public void response(ListView listView, TweetAdapter adapter, @NonNull List<Status> result) {            adapter.clear();            adapter.addAll(result);            listView.setSelection(0);        }    }    @Subscribe    public void OnTwitterReplyEvent(final TwitterStreamEvent event){        if(getUserId() == null ||                event.getUserId() != getUserId() ||                event.getStatus().getInReplyToUserId() != getUserId()) return;        try {            getActivity().runOnUiThread(new Runnable() {                @Override                public void run() {                    refreshView(event.getStatus());                }            });        } catch (Exception e) {            System.out.println(e.toString());        }    }}