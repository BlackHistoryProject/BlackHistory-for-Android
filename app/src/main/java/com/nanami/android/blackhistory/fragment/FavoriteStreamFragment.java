package com.nanami.android.blackhistory.fragment;import android.os.Bundle;import android.support.annotation.NonNull;import android.support.annotation.Nullable;import android.widget.ArrayAdapter;import android.widget.ListView;import com.nanami.android.blackhistory.adapter.TweetAdapter;import com.nanami.android.blackhistory.event.EventBusHolder;import com.nanami.android.blackhistory.event.TwitterFavoriteEvent;import com.nanami.android.blackhistory.fragment.list.TimelineListType;import com.nanami.android.blackhistory.fragment.listener.ListStreamListener;import com.nanami.android.blackhistory.fragment.listener.SimpleStreamListener;import com.squareup.otto.Subscribe;import java.util.List;import twitter4j.Status;import twitter4j.Twitter;import twitter4j.TwitterException;/** * Created by TEJNEK on 2016/01/19. */public class FavoriteStreamFragment extends CommonStreamFragment {    public static FavoriteStreamFragment newInstance(Long userId){        FavoriteStreamFragment fragment = new FavoriteStreamFragment();        fragment.setArguments(userId, TimelineListType.Favorites, new StreamListener());        return fragment;    }    static class StreamListener implements ListStreamListener {        @Nullable        @Override        public List<Status> call(Twitter twitter) throws TwitterException {            return twitter.getFavorites();        }        @Override        public void response(ListView listView, TweetAdapter adapter, @NonNull List<Status> result) {            adapter.clear();            adapter.addAll(result);            listView.setSelection(0);        }    }    @Subscribe    public void OnTwitterFavoriteEvent(final TwitterFavoriteEvent event){        if(getUserId() != null && event.getUserId() != getUserId()) return;        try {            getActivity().runOnUiThread(new Runnable() {                @Override                public void run() {                    refreshView(event.getFavoritedStatus());                }            });        } catch (Exception e) {            System.out.println(e.toString());        }    }}